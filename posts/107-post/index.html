<!DOCTYPE html>
<html class="dark light">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    
    
    
    <title>
         107. UTs concepts - @Mocks
        
    </title>

        
            <meta property="og:title" content="107. UTs concepts - @Mocks" />
        
     

     
         
     

     
         
    

    
    <link rel="icon" type="image/png" href=&#x2F;icons&#x2F;icon.png />

    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@300;400;500;600&display=swap" rel="stylesheet">

    
    
        <link href=https://harsh-doshii.github.io/fonts.css rel="stylesheet" />
    

    
    


    

    
    <link rel="alternate" type="application/atom+xml" title="doshi&#x27;s scratchpad" href="https://harsh-doshii.github.io/atom.xml">


    
    
        <link rel="stylesheet" type="text/css" href=https://harsh-doshii.github.io/theme/light.css />
        <link id="darkModeStyle" rel="stylesheet" type="text/css" href="https://harsh-doshii.github.io/theme/dark.css" />
    

    <link rel="stylesheet" type="text/css" media="screen" href=https://harsh-doshii.github.io/main.css />

    

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-170818569-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-170818569-1');
    </script>

    <script async src="https://us.umami.is/script.js" data-website-id="2b0e0e64-98d6-464b-8574-2cb94d848738"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body);"></script>
</head>

<body>
    <div class="content">
        <header>
    <div class="main">
        <a href=https:&#x2F;&#x2F;harsh-doshii.github.io&#x2F;>doshi&#x27;s scratchpad</a>

        <div class="socials">
            
            <a rel="me" href="https:&#x2F;&#x2F;discuss.systems&#x2F;@hdoshi" class="social">
                <img alt=mastodon src="/social_icons/mastodon.svg">
            </a>
            
            <a rel="me" href="https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;harsh-doshi16&#x2F;" class="social">
                <img alt=linkedin src="/social_icons/linkedin.svg">
            </a>
            
            <a rel="me" href="https:&#x2F;&#x2F;github.com&#x2F;harsh-doshii" class="social">
                <img alt=github src="/social_icons/github.svg">
            </a>
            
        </div>
    </div>

    <nav>
        
        <a href=&#x2F;posts style="margin-left: 0.7em">&#x2F;posts</a>
        
        <a href=&#x2F;about style="margin-left: 0.7em">&#x2F;about</a>
        
        <a href=&#x2F;people style="margin-left: 0.7em">&#x2F;people</a>
        
        <a href=&#x2F;recommendations style="margin-left: 0.7em">&#x2F;recommendations</a>
        

        
        | <a id="dark-mode-toggle" onclick="toggleTheme()" href="javascript:void(0)">
            <img src="/feather/sun.svg" id="sun-icon" style="filter: invert(1);" />
            <img src="/feather/moon.svg" id="moon-icon" />
        </a>
        <script src=https://harsh-doshii.github.io/js/themetoggle.js></script>
        
    </nav>
</header>


        
        
    
<main>
    <article>
        <div class="title">
            
            
    <div class="page-header">
        107. UTs concepts - @Mocks<span class="primary-color" style="font-size: 1.6em">.</span>
    </div>


                <div class="meta">
                    
                        Posted on <time>2024-08-18</time>
                    

                    
                </div>
        </div>

        

        
        
            
        

        <section class="body">
            <p>Recently I have been enjoying writing UTs for my Java-Springboot code. It is such a flex, writing a UT covered code! I am also helping a friend out with writing UTs for her code.</p>
<p>When you open a test file - You will immediately see <code>@Mocks</code> and <code>@InjectMocks</code> annotations and you might feel like throwing your laptop away. But don't, bear with me.</p>
<p>Let's first understand what <em>mocking</em> means. It means to &quot;act&quot;. Let's say you have a function that has this simple logic: 
<code>f(n) --&gt; 2*n;</code></p>
<p>Mocking this function means we take away the logic entirely, that you are multiplying by two. You simply have to think in terms of input and output.
An example mocking would be:</p>
<p><code>when(f(2)).thenReturn(4);</code></p>
<p>This was mocking a function. Now let's build on this by talking about &quot;mocking an object&quot;. Just like mocking a function replaces the actual logic with predetermined input-output behavior, mocking an object means that we replace the actual object (and its methods) with a fake object (a mock). This mock object doesn't contain any real behavior or logic from the original class; instead, it is used to simulate interactions with that object in a controlled way.</p>
<p>Why do we need to mock an object? Because when testing a class we don't need to go through the headache of simultaneously testing its dependencies. When testing a class, we want to focus only on the logic of the class under test, not the behavior of its dependencies.</p>
<p>Let's go through an example! </p>
<p>Let's say we have a class <code>CalculatorService</code> and a method <code>multiply</code>:</p>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class CalculatorService {
    public int multiply(int a, int b) {
        return a * b;
    }
}
</code></pre>
<p>Let's say you are using this class inside another class - <code>MathApplication</code>. Somewhat like this:</p>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class MathApplication {
    private When testing a class, we want to focus only on the logic of the class under test, not the behavior of its dependencies. calculatorService;
    
    public MathApplication (CalculatorService calculatorService) {
        this.calculatorService = calculatorService;
    }
    
    public int calculate(int a, int b) {
        return calculatorService.multiply(a, b);
    }
}
</code></pre>
<p>Thus, now <code>CalculatorService</code> becomes a dependency of <code>MathApplication</code>. Now we know we that when testing <code>MathApplication</code> class we have to mock <code>CalculatorService</code>. It goes something like this:</p>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class MathApplicationTest {
    @Mock
    CalculatorService calculatorService;
    
    @InjectMocks
    MathApplication mathApplication;
    
    @Before
    public void setup() {
        MockitoAnnotations.openMocks(this);
    }
    
    &#x2F;&#x2F;mocking:
    when(calculatorServiceMock.multiply(10, 20)).thenReturn(200);

    &#x2F;&#x2F;Now the mathApp uses the mocked object
    int result = mathApplication.calculate(10, 20);
    assertEquals(200, result);
}
</code></pre>
<p>Note:
<code>@Mocks</code>: Instantiates those dependencies that will be used by the class under test.
<code>@InjectMocks</code>: Instantiates the class under test.</p>
<p><code>MockitoAnnotations.openMocks(this);</code> is required if using these annotations.</p>

        </section>

        

    </article>
</main>


    </div>
</body>

</html>